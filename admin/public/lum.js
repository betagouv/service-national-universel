"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}window._lumiere=window._lumiere||{},window._lumiere.sessionProperties=window._lumiere.sessionProperties||{userAgent:navigator.userAgent,href:window.location.href},window._lumiere.userProperties=window._lumiere.userProperties||{},window.lumiere=window.lumiere||{},window.lumiere.q=window.lumiere.q||[],function(){window._lumiere.send=function(a){if(!window._lumiere.appId)return window.lumiere.q=window.lumiere.q.push(arguments);if(!a.hasOwnProperty("category"))throw new Error("Lumiere: no category is provided");if(!a.hasOwnProperty("action"))throw new Error("Lumiere: no action is provided");var b={timestamp:new Date,sessionProperties:window._lumiere.sessionProperties,userProperties:window._lumiere.userProperties,category:a.category,action:a.action};window._lumiere.namespace&&(b.namespace=window._lumiere.namespace),window._lumiere.userId&&(b.userId=window._lumiere.userId),a.hasOwnProperty("userProperties")&&(b.userProperties=Object.assign(b.userProperties,a.userProperties)),a.hasOwnProperty("sessionProperties")&&(b.sessionProperties=Object.assign(b.sessionProperties,a.sessionProperties)),a.hasOwnProperty("value")&&(b.value=a.value),fetch("https://lumiere.cleverapps.io/api/up?appId=".concat(window._lumiere.appId),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})},window._lumiere.init=function(a,b){window._lumiere.appId=a,window._lumiere.namespace=b},window._lumiere.sendEvent=function(a,b,c){var d={action:b,category:a};c&&(d.value=c),window._lumiere.send(d)},window._lumiere.registerUser=function(a){window._lumiere.userId=a,window._lumiere.send({action:"register-user",category:"inscription"})},window._lumiere.setUserProperties=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};window._lumiere.userProperties=_objectSpread(_objectSpread({},window._lumiere.userProperties),a)},window._lumiere.setEnv=function(a){window._lumiere.sessionProperties=_objectSpread(_objectSpread({},window._lumiere.sessionProperties),{},{env:a})};for(var a,b=0;b<window.lumiere.q.length;b++)a=window.lumiere.q[b],window._lumiere[a[0]](a[1],a[2],a[3]);window.lumiere=function(){window._lumiere[arguments[0]](arguments[1],arguments[2],arguments[3])}}();